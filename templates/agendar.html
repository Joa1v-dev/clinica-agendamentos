<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Agendar Consulta</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h2>📅 Agendar Consulta</h2>
        <a href="{{ url_for('home') }}" class="btn-secondary">← Voltar ao Início</a><br><br>

        {% with messages = get_flashed_messages() %}
        {% if messages %}
            <div class="flash-message">
                {% for message in messages %}
                    <p>{{ message }}</p>
                {% endfor %}
            </div>
        {% endif %}
        {% endwith %}

        <form method="POST" class="form">
            <label for="usuario">Paciente</label>
            <select name="usuario" id="usuario" required>
                <option value="">Selecione um paciente</option>
                {% for u in usuarios %}
                    <option value="{{ u['id'] }}">{{ u['nome'] }}</option>
                {% endfor %}
            </select>

            <label for="agenda">Horário e Médico</label>
            <select name="agenda" id="agenda" required>
                <option value="">Selecione um horário</option>
                {% for a in agendas %}
                    <option value="{{ a['agenda_id'] }}">{{ a['data'] }} – {{ a['horario'] }} – Dr(a). {{ a['medico'] }}</option>
                {% endfor %}
            </select>

            <button type="submit" class="btn-primary">✅ Confirmar Agendamento</button>
        </form>
    </div>
</body>
</html>
